#!/usr/bin/env python3
"""
–û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–µ–∫—Ç–∞ practice-repo
–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å Git, GitHub –∏ —Ç–µ–ø–µ—Ä—å —Å .env —Ñ–∞–π–ª–∞–º–∏
"""

import subprocess
import os
from dotenv import load_dotenv

def load_environment():
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ .env —Ñ–∞–π–ª–∞"""
    try:
        # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
        load_dotenv()
        print("‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ .env")
        return True
    except ImportError:
        print("‚ùå –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ python-dotenv –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞")
        print("   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: pip install python-dotenv")
        return False
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ .env: {e}")
        return False

def print_author():
    """–ü–µ—á–∞—Ç–∞–µ—Ç –∏–º—è –∞–≤—Ç–æ—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è"""
    # –î–æ–ø–∏—à–∏—Ç–µ –∑–¥–µ—Å—å –≤–∞—à –∫–æ–¥
    # –ß–∏—Ç–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è AUTHOR
    author = os.getenv("AUTHOR")
    
    if author:
        print(f"–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞: {author}")
        return author
    else:
        print("‚ùå –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è AUTHOR –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ .env —Ñ–∞–π–ª–µ")
        print("   –î–æ–±–∞–≤—å—Ç–µ –≤ .env: AUTHOR='–í–∞—à–µ –ò–º—è'")
        return None

def show_project_info():
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ"""
    print("=" * 60)
    print("–ü–†–ê–ö–¢–ò–ö–£–ú: –†–ê–ë–û–¢–ê –° GIT, GITHUB –ò .ENV")
    print("=" * 60)
    print("\n–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è:")
    print("‚úÖ –†–∞–±–æ—Ç–µ —Å Git (–≤–µ—Ç–∫–∏, –∫–æ–º–º–∏—Ç—ã, merge)")
    print("‚úÖ –†–∞–±–æ—Ç–µ —Å GitHub (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, PR, issues)")
    print("‚úÖ –†–∞–±–æ—Ç–µ —Å .env —Ñ–∞–π–ª–∞–º–∏ (–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)")
    print("‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é python-dotenv –±–∏–±–ª–∏–æ—Ç–µ–∫–∏")
    
    print("\nüìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:")
    print("- .env - –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ –≤ Git)")
    print("- .gitignore - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã")
    print("- main.py - —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç")
    print("- calculator.py - –º–æ–¥—É–ª—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞")
    print("- requirements.txt - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python")
    
    print("\nüîí –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:")
    print("- –•—Ä–∞–Ω—è—Ç—Å—è –≤ .env —Ñ–∞–π–ª–µ")
    print("- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤ .gitignore")
    print("- –ù–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π")
    print("- –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ python-dotenv")

def demonstrate_features():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞"""
    print("\n" + "=" * 60)
    print("–î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –í–û–ó–ú–û–ñ–ù–û–°–¢–ï–ô")
    print("=" * 60)
    
    # 1. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–≤—Ç–æ—Ä–∞
    print("\nüë®üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ—Ä–µ:")
    author = print_author()
    
    # 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env
    print("\nüìã –î—Ä—É–≥–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env:")
    project_name = os.getenv("PROJECT_NAME")
    version = os.getenv("VERSION")
    
    if project_name:
        print(f"   –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: {project_name}")
    if version:
        print(f"   –í–µ—Ä—Å–∏—è: {version}")
    
    # 3. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
    print("\nüßÆ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞:")
    try:
        from calculator import add, multiply
        print(f"   7 + 3 = {add(7, 3)}")
        print(f"   7 * 3 = {multiply(7, 3)}")
    except ImportError:
        print("   ‚ÑπÔ∏è  –ú–æ–¥—É–ª—å calculator.py –Ω–µ –Ω–∞–π–¥–µ–Ω")
    
    # 4. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Git
    print("\nüìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Git:")
    try:
        result = subprocess.run(['git', 'branch', '--show-current'], 
                              capture_output=True, text=True)
        branch = result.stdout.strip() or "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞"
        print(f"   –¢–µ–∫—É—â–∞—è –≤–µ—Ç–∫–∞: {branch}")
        
        result = subprocess.run(['git', 'log', '-1', '--oneline'], 
                              capture_output=True, text=True)
        last_commit = result.stdout.strip() or "–Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω"
        print(f"   –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç: {last_commit}")
    except:
        print("   –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Git –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞")

def main():
    """–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è"""
    # –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    if not load_environment():
        print("\n‚ö†Ô∏è  –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ .env —Ñ–∞–π–ª–∞")
    
    show_project_info()
    demonstrate_features()
    
    print("\n" + "=" * 60)
    print("üéØ –ò–¢–û–ì–ò –ó–ê–î–ê–ù–ò–Ø –ü–û .ENV")
    print("=" * 60)
    print("\n‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:")
    print("1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ python-dotenv")
    print("2. –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª .env —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π AUTHOR")
    print("3. .env –¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore")
    print("4. –ù–∞–ø–∏—Å–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è print_author()")
    print("5. –§—É–Ω–∫—Ü–∏—è —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏–∑ –æ–∫—Ä—É–∂–µ–Ω–∏—è")
    
    print("\nüöÄ –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–¥–∞–Ω–∏—è:")
    print("1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: python main.py")
    print("2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∏–¥–Ω–æ '–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞: alexdata64as'")
    print("3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ .env –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è Git")
    
    print("\n‚≠ê –ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!")

if __name__ == "__main__":
    main()
